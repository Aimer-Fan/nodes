<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>12_自定义Promise.html</title>
</head>
<body>
  <script src="./lib/Promise_class.js"></script>
  <script type="text/javascript">
    // const p = new Promise((resolve, reject) => {
    //   setTimeout(() => {
    //     // resolve(1)
    //     // debugger
    //     reject(3)
    //   })
    // })
    // p.then(
    //   value => { console.log('onResolved1', value) },
    //   reason => { console.log('onRejected1', reason); throw 4 }
    // ).then(
    //   value => { console.log('onResolved2', value) },
    //   reason => { console.log('onRejected2', reason); throw 5; }
    // ).then(
    //   value => { console.log('onResolved3', value) },
    //   reason => { console.log('onRejected3', reason); return 6; }
    // ).then(
    //   value => {
    //     console.log('onResolved4', value)
    //     return new Promise(() => {}) // 中断promise链
    //   },
    //   reason => { console.log('onRejected4', reason) }
    // ).then(
    //   value => { console.log('onResolved5', value) },
    //   reason => { console.log('onRejected5', reason) }
    // )


    const p1 = Promise.resolve(1)
    const p2 = Promise.resolve(Promise.resolve(2))
    const p3 = Promise.resolve(Promise.resolve(3))
    const p4 = Promise.reject('error')
    const p5 = new Promise(resolve => {
      setTimeout(() => {
        resolve(5)
      }, 100)
    })

    // p1.then(
    //   value => { console.log('p1 resolved', value) },
    //   reason => { console.log('p1 rejected', reason) },
    // )
    // p2.then(
    //   value => { console.log('p2 resolved', value) },
    //   reason => { console.log('p2 rejected', reason) },
    // )
    // p3.then(
    //   value => { console.log('p3 resolved', value) },
    //   reason => { console.log('p3 rejected', reason) },
    // )
    // p4.then(
    //   value => { console.log('p4 resolved', value) },
    //   reason => { console.log('p4 rejected', reason) },
    // )

    const pAll = Promise.all([p5, p1, p2, p3, 10])
    pAll.then(
      value => { console.log('all resolved', value) },
      reason => { console.log('all rejected', reason) }
    )
  </script>
</body>
</html>